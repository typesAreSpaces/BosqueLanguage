//-------------------------------------------------------------------------------------------------------
// Copyright (C) Microsoft. All rights reserved.
// Licensed under the MIT license. See LICENSE.txt file in the project root for full license information.
//-------------------------------------------------------------------------------------------------------

//
//This is a bosque test/benchmark for a simple identity function.
//Expected output is: 1
//

namespace NSMain;

function identity(x: Int?): Int
{
    if(x == none){
      return 20;
    }
    else{
      return x;
    }
}

// --------------------------------------------------------------------------
// Cannot type check to identity2 : Int | Bool -> Int
// Hence flow typing is done by checking the types
// in the control flow of the program, not the values
// in the program, to the exception to none : None since
// the equality to none shortcuts to checking isNone, i.e. checking the type
// --------------------------------------------------------------------------
function identity2(x : Int | Bool) : Int | Bool
{
  if(x == true){
    return 1;
  }
  else{
    if(x == false){
      return 0;
    }
    else{
      return x;
    }
  }
}

function identity3(x : Int | Bool) : Int | Bool
{
  if(x as Bool){
    return 1;
  }
  else{
    return x;
  }
}

entrypoint function main() : Int {
    var x = identity3(1);
    return x;
}